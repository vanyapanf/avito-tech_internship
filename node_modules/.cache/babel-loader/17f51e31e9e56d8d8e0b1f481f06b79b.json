{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ivanp\\\\source\\\\repos\\\\avito-tech_internship\\\\src\\\\components\\\\StoryComment.jsx\",\n  _s = $RefreshSig$();\nimport React from 'react';\nimport { Comment } from 'antd';\nimport 'antd/dist/antd.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction StoryComment(_ref) {\n  _s();\n  let {\n    key,\n    data\n  } = _ref;\n  const [nestedComments, setNestedComments] = React.useState([]);\n  React.useEffect(() => {\n    fetchNestedComments();\n  }, []);\n  async function fetchNestedComments(comment) {\n    try {\n      let newNestedComments = [];\n      if (!comment.kids) return;\n      for (let commentId of comment.kids) {\n        const commentResponse = await fetch(`https://hacker-news.firebaseio.com/v0/item/${commentId}.json?print=pretty`);\n        let nestedComment = await commentResponse.json();\n        if (nestedComment !== null) newNestedComments = [...newNestedComments, nestedComment];\n      }\n      setNestedComments(newNestedComments);\n    } catch (error) {\n      alert('Ошибка при запросе данных');\n    }\n  }\n  return /*#__PURE__*/_jsxDEV(Comment, {\n    author: /*#__PURE__*/_jsxDEV(\"a\", {\n      children: data.by\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 30,\n      columnNumber: 19\n    }, this),\n    content: /*#__PURE__*/_jsxDEV(\"p\", {\n      children: data.text\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 31,\n      columnNumber: 20\n    }, this),\n    datetime: /*#__PURE__*/_jsxDEV(\"span\", {\n      children: data.time\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 32,\n      columnNumber: 21\n    }, this),\n    children: nestedComments && nestedComments.map(comment => /*#__PURE__*/_jsxDEV(StoryComment, {\n      data: comment\n    }, comment.id, false, {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 17\n    }, this))\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 29,\n    columnNumber: 9\n  }, this);\n}\n_s(StoryComment, \"5DebbpzoY4xNPZkCu/vSz3kfvDc=\");\n_c = StoryComment;\nexport default StoryComment;\nvar _c;\n$RefreshReg$(_c, \"StoryComment\");","map":{"version":3,"names":["React","Comment","StoryComment","key","data","nestedComments","setNestedComments","useState","useEffect","fetchNestedComments","comment","newNestedComments","kids","commentId","commentResponse","fetch","nestedComment","json","error","alert","by","text","time","map","id"],"sources":["C:/Users/ivanp/source/repos/avito-tech_internship/src/components/StoryComment.jsx"],"sourcesContent":["import React from 'react';\r\nimport { Comment } from 'antd';\r\nimport 'antd/dist/antd.css';\r\n\r\nfunction StoryComment({key, data}){\r\n    const [ nestedComments, setNestedComments ] = React.useState([]);\r\n\r\n    React.useEffect(() => {\r\n      fetchNestedComments();\r\n    }, []);\r\n\r\n    async function fetchNestedComments(comment) {\r\n        try {\r\n            let newNestedComments = [];\r\n            if (!comment.kids)\r\n              return;\r\n            for (let commentId of comment.kids) {\r\n                const commentResponse = await fetch(`https://hacker-news.firebaseio.com/v0/item/${commentId}.json?print=pretty`);\r\n                let nestedComment = await commentResponse.json();\r\n                if (nestedComment !== null) newNestedComments = [...newNestedComments, nestedComment];\r\n            }\r\n            setNestedComments(newNestedComments);\r\n        } catch (error) {\r\n            alert('Ошибка при запросе данных');\r\n        }\r\n    }\r\n\r\n    return (\r\n        <Comment\r\n          author={<a>{data.by}</a>}\r\n          content={<p>{data.text}</p>}\r\n          datetime={<span>{data.time}</span>}\r\n        >\r\n          { \r\n              nestedComments &&\r\n              nestedComments.map((comment) => (\r\n                <StoryComment\r\n                  key = {comment.id}\r\n                  data = {comment}\r\n                />\r\n              )) \r\n          }\r\n        </Comment>\r\n    );\r\n}\r\n\r\nexport default StoryComment;"],"mappings":";;AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAASC,OAAO,QAAQ,MAAM;AAC9B,OAAO,oBAAoB;AAAC;AAE5B,SAASC,YAAY,OAAa;EAAA;EAAA,IAAZ;IAACC,GAAG;IAAEC;EAAI,CAAC;EAC7B,MAAM,CAAEC,cAAc,EAAEC,iBAAiB,CAAE,GAAGN,KAAK,CAACO,QAAQ,CAAC,EAAE,CAAC;EAEhEP,KAAK,CAACQ,SAAS,CAAC,MAAM;IACpBC,mBAAmB,EAAE;EACvB,CAAC,EAAE,EAAE,CAAC;EAEN,eAAeA,mBAAmB,CAACC,OAAO,EAAE;IACxC,IAAI;MACA,IAAIC,iBAAiB,GAAG,EAAE;MAC1B,IAAI,CAACD,OAAO,CAACE,IAAI,EACf;MACF,KAAK,IAAIC,SAAS,IAAIH,OAAO,CAACE,IAAI,EAAE;QAChC,MAAME,eAAe,GAAG,MAAMC,KAAK,CAAE,8CAA6CF,SAAU,oBAAmB,CAAC;QAChH,IAAIG,aAAa,GAAG,MAAMF,eAAe,CAACG,IAAI,EAAE;QAChD,IAAID,aAAa,KAAK,IAAI,EAAEL,iBAAiB,GAAG,CAAC,GAAGA,iBAAiB,EAAEK,aAAa,CAAC;MACzF;MACAV,iBAAiB,CAACK,iBAAiB,CAAC;IACxC,CAAC,CAAC,OAAOO,KAAK,EAAE;MACZC,KAAK,CAAC,2BAA2B,CAAC;IACtC;EACJ;EAEA,oBACI,QAAC,OAAO;IACN,MAAM,eAAE;MAAA,UAAIf,IAAI,CAACgB;IAAE;MAAA;MAAA;MAAA;IAAA,QAAM;IACzB,OAAO,eAAE;MAAA,UAAIhB,IAAI,CAACiB;IAAI;MAAA;MAAA;MAAA;IAAA,QAAM;IAC5B,QAAQ,eAAE;MAAA,UAAOjB,IAAI,CAACkB;IAAI;MAAA;MAAA;MAAA;IAAA,QAAS;IAAA,UAG/BjB,cAAc,IACdA,cAAc,CAACkB,GAAG,CAAEb,OAAO,iBACzB,QAAC,YAAY;MAEX,IAAI,EAAIA;IAAQ,GADTA,OAAO,CAACc,EAAE;MAAA;MAAA;MAAA;IAAA,QAGpB;EAAC;IAAA;IAAA;IAAA;EAAA,QAEE;AAElB;AAAC,GAxCQtB,YAAY;AAAA,KAAZA,YAAY;AA0CrB,eAAeA,YAAY;AAAC;AAAA"},"metadata":{},"sourceType":"module"}